'use strict';(function(){Polymer({is:'sd-keen-vis',properties:{counterValue:{type:Number,value:0,notify:true},project:{type:String},readKey:{type:String},collection:{type:String},analysisType:{type:String},timeframe:{type:String},interval:{type:String},chartData:{type:Object,notify:true,reflectToAttribute:true},seriesConfig:{type:Object,notify:true,reflectToAttribute:true}},observers:['_initClient(project, key)','_updateQuery(collection, analysisType)'],created:function created(){this.config={}},ready:function ready(){Keen.ready(function(){console.log('Keen ready.')}.bind(this))},attached:function attached(){console.log('attached');this._updateQuery()},_initClient:function _initClient(){console.log('initClient');this.client=new Keen({projectId:this.project,readKey:this.readKey})},_updateQuery:function _updateQuery(){if(!this.client){this._initClient()}else{console.log('update query');this.query=new Keen.Query(this.analysisType,{event_collection:this.collection,timeframe:this.timeframe,interval:this.interval});console.log(this.query);console.log(this.$.chartcanvas);this._runQuery()}},_runQuery:function _runQuery(){if(this.client){this.client.run(this.query,function(err,res){if(err){console.log(err)}else{console.log(res.result);var result=res.result;console.log(result);result=_.map(result,function(n){console.log(n);n={'x':parseInt(moment(n.timeframe.start).format('x')),'y':n.value};return n});console.log(result);var seriesConfig={'seriesKey':{'type':'line','name':'My Series','x':'x','y':'y','yAxisUnit':'Oranges','axis':{'id':'AXIS_ID','side':'left','number':1}}};this.set('seriesConfig',seriesConfig);this.set('chartData',result)}}.bind(this))}},handleClick:function handleClick(event,detail,sender){this.increment()},increment:function increment(){this.counterValue++}})})();
//# sourceMappingURL=sd-keen-vis.js.map
